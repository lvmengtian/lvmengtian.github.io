import{_ as n,c as a,a as e,o as i}from"./app-DqL0oT9G.js";const l={};function p(d,s){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h2><h3 id="创建workflow文件" tabindex="-1"><a class="header-anchor" href="#创建workflow文件"><span>创建workflow文件</span></a></h3><p>路径：git仓库 -&gt; Actions -&gt; New workflow -&gt; Simple workflow</p><p>内容配置如下，并且文件命名后缀为<code>yml</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>name: docs</span></span>
<span class="line"><span></span></span>
<span class="line"><span>on:</span></span>
<span class="line"><span>  # 每当 push 到 main 分支时触发部署</span></span>
<span class="line"><span>  push:</span></span>
<span class="line"><span>    branches: [main]</span></span>
<span class="line"><span>  # 手动触发部署</span></span>
<span class="line"><span>  workflow_dispatch:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>jobs:</span></span>
<span class="line"><span>  docs:</span></span>
<span class="line"><span>    runs-on: ubuntu-latest</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    steps:</span></span>
<span class="line"><span>      - uses: actions/checkout@v4</span></span>
<span class="line"><span>        with:</span></span>
<span class="line"><span>          # “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录</span></span>
<span class="line"><span>          fetch-depth: 0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - name: Setup pnpm</span></span>
<span class="line"><span>        uses: pnpm/action-setup@v4</span></span>
<span class="line"><span>        with:</span></span>
<span class="line"><span>          # 选择要使用的 pnpm 版本</span></span>
<span class="line"><span>          version: 10</span></span>
<span class="line"><span>          # 使用 pnpm 安装依赖</span></span>
<span class="line"><span>          run_install: true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      - name: Setup Node.js</span></span>
<span class="line"><span>        uses: actions/setup-node@v4</span></span>
<span class="line"><span>        with:</span></span>
<span class="line"><span>          # 选择要使用的 node 版本</span></span>
<span class="line"><span>          node-version: 22</span></span>
<span class="line"><span>          # 缓存 pnpm 依赖</span></span>
<span class="line"><span>          cache: pnpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      # 运行构建脚本</span></span>
<span class="line"><span>      - name: Build VuePress site</span></span>
<span class="line"><span>        run: pnpm docs:build</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      # 查看 workflow 的文档来获取更多信息</span></span>
<span class="line"><span>      # @see https://github.com/crazy-max/ghaction-github-pages</span></span>
<span class="line"><span>      - name: Deploy to GitHub Pages</span></span>
<span class="line"><span>        uses: crazy-max/ghaction-github-pages@v4</span></span>
<span class="line"><span>        with:</span></span>
<span class="line"><span>          # 部署到 gh-pages 分支</span></span>
<span class="line"><span>          target_branch: gh-pages</span></span>
<span class="line"><span>          # 部署目录为 VuePress 的默认输出目录</span></span>
<span class="line"><span>          build_dir: docs/.vuepress/dist</span></span>
<span class="line"><span>        env:</span></span>
<span class="line"><span>          # @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret</span></span>
<span class="line"><span>          GITHUB_TOKEN: \${{ secrets.GITHUB_TOKEN }}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置pages" tabindex="-1"><a class="header-anchor" href="#配置pages"><span>配置Pages</span></a></h3><p>路径：git仓库 -&gt; Settings -&gt; Code and automation -&gt; Pages -&gt; Build and deployment</p><ul><li>source：选择Deploy from a branch</li><li>branch：选择gh-pages 文件 /root</li></ul><h2 id="遇到的问题" tabindex="-1"><a class="header-anchor" href="#遇到的问题"><span>遇到的问题</span></a></h2><h3 id="问题1" tabindex="-1"><a class="header-anchor" href="#问题1"><span>问题1</span></a></h3><p>部署失败，提示报错信息如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Pushing docs/.vuepress/dist directory to gh-pages branch on xxx/xxx.github.io repo</span></span>
<span class="line"><span>  /usr/bin/git push --force ***github.com/xxx/xxx.github.io.git gh-pages</span></span>
<span class="line"><span>  remote: Permission to xxx/xxx.github.io.git denied to github-actions[bot].</span></span>
<span class="line"><span>  fatal: unable to access &#39;https://github.com/xxx/xxx.github.io.git/&#39;: The requested URL returned error: 403</span></span>
<span class="line"><span>  Error: The process &#39;/usr/bin/git&#39; failed with exit code 128</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>原因：</strong> workflow的权限不够</p><p><strong>解决方式：</strong> 路径：git仓库 -&gt; Settings -&gt; Code and automation -&gt; Actions -&gt; General -&gt; Workflow permissions 打开：<code>Read and write permissions</code></p><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接"><span>参考链接</span></a></h2><ol><li><a href="https://vuepress.vuejs.org/guide/deployment.html#github-pages" target="_blank" rel="noopener noreferrer">vuepress deployment</a></li></ol>`,16)])])}const t=n(l,[["render",p]]),r=JSON.parse('{"path":"/notes/2w5wcxxz/","title":"vuepress部署Github Pages","lang":"zh-CN","frontmatter":{"title":"vuepress部署Github Pages","createTime":"2025-08-22T10:40:17.000Z","permalink":"/notes/2w5wcxxz/"},"readingTime":{"minutes":1.28,"words":384},"git":{"createdTime":1755770560000,"updatedTime":1756213745000,"contributors":[{"name":"是小毛吖","username":"","email":"lvmengtian@xiaohongshu.com","commits":3,"avatar":"https://gravatar.com/avatar/c0ee6d55db211429e755ad24bc21e24b08cd677fb42d623d66bc248366441c32?d=retro"},{"name":"lvmengtian","username":"lvmengtian","email":"lvmengtian@xiaohongshu.com","commits":3,"avatar":"https://avatars.githubusercontent.com/lvmengtian?v=4","url":"https://github.com/lvmengtian"}]},"filePathRelative":"notes/others/vuePress部署githubPages.md","headers":[]}');export{t as comp,r as data};
